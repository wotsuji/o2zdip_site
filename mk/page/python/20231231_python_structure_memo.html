<!doctype html>
<html lang="jp">

<head>
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="ja">
  <meta name="robots" content="noindex">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-store">
  <title>Python構文メモ（2023/12/31）</title>
  <meta name="description" itemprop="description" content="個人的なコードのサンプル・メモ集です。">
  <meta name="author" content="otsuji">
  <!-- ビューポート -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- OG設定 -->
  <meta property="og:site_name" content="o2zdip">
  <meta property="og:description" content="個人的なコードのサンプル・メモ集です。">
  <meta property="og:title" content="o2zdip">
  <meta property="og:url" content="http://o2zdip.starfree.jp/">
  <meta property="og:image" content="">
  <meta property="og:type" content="website"><!-- トップページはwebsite，個別ページはarticle -->
  <!-- Twitter共通設定 -->
  <meta name="twitter:card" content="">
  <meta name="twitter:site" content="">

  <!-- ファビコン -->
  <link rel="icon" href="/mk/favicon.ico">

  <!-- CSS設定 -->
  <link href="/mk/css/bootstrap-reboot.min.css" rel="stylesheet"><!-- Bootstrap-reboot-->
  <link href="/mk/css/bootstrap.min.css" rel="stylesheet"><!-- Bootstrap-min -->
  <link href="/mk/css/style.css" rel="stylesheet">
  <style>
  </style>

</head>

<body>

  <header>
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="/mk/index.html">o2zdip</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/mk/index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Dropdown
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li>
                  <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
            </li>
          </ul>
          <form class="d-flex">
            <input class="form-control me-2" type="search" placeholder="Search 未実装" aria-label="Search">
            <button class="btn btn-success" type="submit">Search</button>
          </form>
        </div>
      </div>
    </nav>
  </header>

  <div class="d-flex flex-row w-100">
    <nav class="bg-secondary side_menu">
      <p class="mb-0 pb-0">
        <button type="button" class="btn w-100 pb-0" id="side_menu_button" data-bs-toggle="collapse" data-bs-target="#collapseWidthExample" aria-expanded="false" aria-controls="collapseWidthExample">
          <div class="side_menu_text" style="text-align: left; color: #FFFFFF;">&lt;&lt;</div>
        </button>
      </p>
      <div class="collapse collapse-horizontal show" id="collapseWidthExample">
        <ul class="nav flex-column mb-5 pb-2">
          <li class="nav-item"><a href="/mk/page/html/base.html" class="nav-link link-light">HTML</a></li>
          <li class="nav-item"><a href="/mk/page/javascript/base.html" class="nav-link link-light">JavaScript</a></li>
          <li class="nav-item"><a href="/mk/page/css/base.html" class="nav-link link-light">CSS</a></li>
          <li class="nav-item"><a href="/mk/page/php/base.html" class="nav-link link-light">PHP</a></li>
          <li class="nav-item"><a href="/mk/page/python/base.html" class="nav-link link-light">Python</a></li>
          <li class="nav-item"><a href="/mk/page/git/base.html" class="nav-link link-light">Git</a></li>
          <li class="nav-item"><a href="/mk/page/system/base.html" class="nav-link link-light">設計</a></li>
          <li class="nav-item"><a href="/mk/page/server/base.html" class="nav-link link-light">インフラ</a></li>
          <li class="nav-item"><a href="/mk/page/blog/base.html" class="nav-link link-light">ブログ関連</a></li>
          <div style="color: #ffffff; text-align: center;">------------</div>
          <li class="nav-item"><a href="/mk/page/app/base.html" class="nav-link link-light">アプリ</a></li>
          <li class="nav-item"><a href="/mk/page/link/base.html" class="nav-link link-light">リンク集</a></li>
          <div style="color: #ffffff; text-align: center;">------------</div>
          <li class="nav-item"><a href="https://zenn.dev/o2z" class="nav-link link-light" target="_blank">Zenn</a></li>
          <li class="nav-item"><a href="https://note.com/w_o2z" class="nav-link link-light" target="_blank">note</a></li>
          <li class="nav-item"><a href="https://github.com/wotsuji" class="nav-link link-light" target="_blank">github</a></li>
          <li class="nav-item"><a href="https://connpass.com/user/wataruotsuji/" class="nav-link link-light" target="_blank">connpass</a></li>
          <li class="nav-item"><a href="https://twitter.com/w_o2z" class="nav-link link-light" target="_blank">X(Twitter)</a></li>
        </ul>
      </div>
    </nav>
    <main role="main" class="container-fluid pt-1">
      <div><a href="./../../index.html">HOME</a> &gt; Python</div>

<h1>Python構文メモ</h1>
<p>
　Pythonで気になった構文・仕様のメモ（思いの他、癖が強そうな言語な印象）<br>
　・ファイル入出力は楽に安全にできる<br>
　・OSコマンドが気軽に実行できるがOSコマンドインジェクションは気を付けないといけない<br>
　・プログラム行末が改行のみでよい（複数行の時にバックスラッシュ）<br>
</p>

<p>
<h2>◆変数</h2>
　・小数点以下の挙動 0,1**3 すると誤差が出る（仕様）<br>
　　小数点以下はライブラリを使用する必要がある。<br>
<br>
　・「リスト（オブジェクト）は参照渡し」になる<br>
　　※リスト（オブジェクト）の値渡しはcopy()メソッドを使う（y = x.copy)<br>
<br>
　・辞書型と集合型は両方とも {} を使う<br>
<br>
　・変数確認<br>
　　0 or 空文字 or None or False はFalse、それ以外はTrueになる<br>
　　空配列 [] () {} はfalseになる<br>
    <div class="bg-dark text-light py-1 ps-3">
　　if hoge:<br>
　　    print("ok")<br>
　　else<br>
　　    print("ng")<br>
    </div>
<br>
　・変数のスコープ<br>
　　for文の中で作成した変数が、for文の外で使える。（PHPと同様）<br>
　　※def（関数）は外に出てこない<br>
　　グローバル変数はdef内で使用できるが、そのままでは変更はできない<br>
</p>
<br>

<p>
<h2>◆演算子</h2>
　「100//10」割り算の後、小数点以下切り捨てる<br>
　「100**10」は100の10乗<br>
</p>

<p>
<h2>◆if文</h2>
　・演算子<br>
        <div class="bg-dark text-light py-1 ps-3">
　　&　　ビット演算子　ビット単位論理積 {} & {} => 両方にあるキーを抽出（←要確認）<br>
　　|　　ビット演算子　ビット単位論理和 {} | {} => 重複を合体（←要確認）<br>
　　and　真偽値演算子<br>
　　or 　真偽値演算子<br>
    </div>
</p>

<p>
<h2>◆ループ文</h2>
　・for 変数 in 配列:<br>
　・辞書型{}の場合 {'x': 100, 'y': 200}<br>
　　for k,v in 辞書型配列.items():<br>
<br>
　・for ... else でループの最後の後に処理を書くことができる<br>
　　ただし、break文で終了した場合はelseは実行されない。<br>
<br>
　・インクリメントループはwhileを使うことになる<br>
　　while ... else でループの最後の後に処理を書くことができる<br>
　　ただし、break文で終了した場合はelseは実行されない。<br>
</p>

<p>
<h2>◆リスト（配列）</h2>
　・リスト内包処理<br>
    <div class="bg-dark text-light py-1 ps-3">
　  t = (1,2,3,4,5)<br>
　  r = []<br>
　  r = [i for i in t if i % 2 ==0]   # 偶数だけ取り出す<br>
　  r = [i*2 for i in t if i % 2 ==0] # 結果を計算して配列に入れられる<br>
    </div>
<br>
　・辞書表記（連想配列）/集合型<br>
    <div class="bg-dark text-light py-1 ps-3">
　　w = {'mon':'coffee','tue':'milk'}<br>
　　g = {1,2,3}<br>
    </div>
</p>

<p>
<h2>◆関数</h2>
　・関数の中に関数を作れる<br>
　　　関数を返す関数を作れる（外側の関数の引数を保持した内側の関数を返す）<br>
　　　※あまりClassという概念も無い感じ。<br>
<br>
　・関数の引数に*argsと**kwargs。<br>
　　引数に任意の数の引数（可変長引数）を指定できる。<br>
　　*args: 複数の引数をタプルとして受け取る<br>
　　**kwargs: 複数のキーワード引数を辞書として受け取る<br>
</p>

<p>
<h2>◆パッケージ</h2>
　・パッケージはフォルダ名（ファイル名とドットでつなぐ）<br>
<br>
　・実行されているファイルの判別<br>
    <div class="bg-dark text-light py-1 ps-3">
　　「__name__ == "__main__"」<br>
　　　---------------------------<br>
　　　　def main():<br>
　　　　　print("実行ファイル")<br>
　　　　　<br>
　　　　if __name == '__main__':<br>
　　　　　main()<br>
　　　---------------------------<br>
    </div>
<br>
・インポート<br>
    <div class="bg-dark text-light py-1 ps-3">
　　import xxx<br>
    </div>
<br>
・ファイル名にアンダーバーなど含まれている場合はimportが使えないので下記のようにする。<br>
    <div class="bg-dark text-light py-1 ps-3">
　　fibo = importlib.import_module("20231221_fibo")<br>
　　print(fibo.fib(20))<br>
    </div>
<br>
・from xxx import *<br>
　fromの先の関数をファイル内に引き込むので接続詞を付けずに関数を使用する。<br>
    <div class="bg-dark text-light py-1 ps-3">
　　from hello import world<br>
　　print(world)<br>
    </div>
<br>
・from [ファイル名] import [クラス名]<br>
はクラスを引き込む<br>
</p>

<p>
<h2>◆オブジェクトとクラス</h2>
　・「new()」インスタンスの命令は存在しないが・・・<br>
    <div class="bg-dark text-light py-1 ps-3">
　　p = Person() ← インスタンスが作成される<br>
　　p = Person   ← インスタンスは作成されない（クラス自体が変数に入っている状態）<br>
    </div>
<br>
　・メソッドの第一引数は必ず「self」になる<br>
　　（メソッド呼び出し時は第二引数から値がセットされていく）<br>
<br>
　・コンストラクタ<br>
    <div class="bg-dark text-light py-1 ps-3">
　　def __init__(self):<br>
　　    pass<br>
    </div>
<br>
　・デストラクタ<br>
    <div class="bg-dark text-light py-1 ps-3">
　　def __del__(self):<br>
　　    pass<br>
    </div>
<br>
　　person = Person() # コンストラクタ実行<br>
　　del person        # デストラクタが実行される<br>
<br>
　・クラス変数（オブジェクト共通になる）⇔インスタンス変数（オブジェクト固有）<br>
    <div class="bg-dark text-light py-1 ps-3">
　　class Sample(object):<br>
　　	# クラス変数（オブジェクト共通になる）<br>
　　	hensu = "変数"<br>
　　	# コンストラクタ<br>
　　	def __init__(self):<br>
　　		self.hensu = "インスタンス変数" # インスタンス変数はオブジェクト固有となる<br>
    </div>
<br>
　・多重継承が許可されている<br>
　　※同じメソッド名がある場合は左側のクラスが優先される<br>
    <div class="bg-dark text-light py-1 ps-3">
　　	PersonCarRobot(Person, car):　　#Personのメソッドが優先される<br>
    </div>
</p>

<p>
<h2>◆OSコマンド実行</h2>
　標準ライブラリ：subprocess ※osライブラリは非推奨らしい<br>
　※標準は「標準出力と標準エラー出力」に出力される。戻り値の受け取り方はプロパティを渡す必要がある。<br>
    <div class="bg-dark text-light py-1 ps-3">
　　import subprocess<br>
　　proc = subprocess.run(["dir"],stdout = subprocess.PIPE, stderr = subprocess.PIPE,shell=True)<br>
　　print(proc.stdout.decode("cp932"))<br>
     </div>
</p>
<br>
    </main>
  </div>
  <footer>
    <p class="small text-center">Copyright &copy; otsuji.wataru</p>
  </footer>

  <!-- JavaScript  -->
  <script src="/mk/js/bootstrap.bundle.min.js"></script> <!-- Bootstrap-min -->
  <script src="/mk/js/base.js"></script>
  <!-- Google Tag Manager -->
  <script>
    (function(w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
      });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
      j.async = true;
      j.src =
        'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-P3P4KB94');
  </script>
  <!-- End Google Tag Manager -->
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P3P4KB94" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

</body>

</html>